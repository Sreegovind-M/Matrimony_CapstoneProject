<app-navbar></app-navbar>
<main class="booking__confirmation">
  <!-- LOADING STATE -->
  <section *ngIf="isLoading" class="booking__confirmation__loading">
    <div class="booking__confirmation__skeleton-circle"></div>
    <div class="booking__confirmation__skeleton-card"></div>
  </section>

  <!-- ERROR STATE -->
  <section *ngIf="hasError" class="booking__confirmation__error">
    <span class="material-symbols-outlined">error_outline</span>
    <h2>Unable to fetch booking details</h2>
    <p>Please check your connection and try again.</p>
    <button (click)="retry()">Retry</button>
  </section>

  <!-- SUCCESS STATE -->
  <section *ngIf="!isLoading && !hasError" class="booking__confirmation__card">
    <div class="booking__confirmation__icon">
      <span class="material-symbols-outlined">check_circle</span>
    </div>

    <h1 class="booking__confirmation__title">Booking Confirmed!</h1>
    <p class="booking__confirmation__subtitle">
      Your tickets have been successfully booked.
    </p>

    <div class="booking__confirmation__summary" *ngIf="booking">
      <div class="booking__confirmation__item">
        <label>Confirmation Code</label>
        <span>{{ booking.confirmation_code || 'N/A' }}</span>
      </div>

      <div class="booking__confirmation__item">
        <label>Booking ID</label>
        <span>#{{ booking.id || 'N/A' }}</span>
      </div>

      <div class="booking__confirmation__item">
        <label>Event</label>
        <span>{{ booking.event_name || 'Event #' + booking.event_id }}</span>
      </div>

      <div class="booking__confirmation__item">
        <label>Tickets Booked</label>
        <span>{{ booking.tickets_booked || 0 }}</span>
      </div>

      <div class="booking__confirmation__item">
        <label>Total Amount</label>
        <span>${{ booking.total_price || '0.00' }}</span>
      </div>

      <div class="booking__confirmation__item">
        <label>Booking Time</label>
        <span>{{ booking.booking_time ? (booking.booking_time | date : 'medium') : 'N/A' }}</span>
      </div>

      <div class="booking__confirmation__item">
        <label>Status</label>
        <span class="status-confirmed">{{ booking.status || 'CONFIRMED' }}</span>
      </div>
    </div>

    <div class="booking__confirmation__actions">
      <button class="primary" (click)="goToBookings()">View My Bookings</button>
      <button class="secondary" (click)="browseEvents()">
        Browse More Events
      </button>
    </div>
  </section>
</main>